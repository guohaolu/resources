WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.comalatech.adhoccanvas:analyticsResources', location = 'templates/analytics/analytics-min.js' */
AJS.toInit(function(d){var k="http://localhost:3000",h="https://analytics.comalatech.io/1/app-stats",b=5,e={},j,a="com.comalatech.adhoccanvas",f=a.replace("-",""),c=AJS.params[f+"Trace"],i=!!AJS.params[f+"DevMode"],g=(f+"Stats").length,l=function(){d.ajax({type:"POST",url:AJS.Confluence.getContextPath()+"/rest/"+a+"/analytics/1/analytics/ack",headers:{"x-atlassian-token":"no-check"},success:function(){c&&console.log("ğŸ””ğŸ””ğŸ”” Acked stats")}})};Object.keys(AJS.params).filter(function(m){return m.startsWith(f+"Stats")}).forEach(function(n){var m=n.substring(g);m=m.charAt(0).toLowerCase()+m.slice(1);if(typeof AJS.params[n]==="boolean"){e[m]=AJS.params[n]}else{e[m]=isNaN(AJS.params[n])?AJS.params[n]:+AJS.params[n]}});if(e.instanceId&&e.timestamp&&e.comalatechToken){j=e.comalatechToken;delete e.comalatechToken;d.ajax({type:"POST",url:(i?k:h)+"?token="+encodeURIComponent(j),cache:false,contentType:"text/plain; charset=utf-8",data:JSON.stringify(e),success:function(){c&&console.log("ğŸ””ğŸ””ğŸ”” Sent stats!!!!",i&&"DEV MODE",e);sessionStorage.removeItem("retries");l()},error:function(n,p,o){c&&console.error("ğŸ”•ğŸ”•ğŸ”• Error sending stats",p,o);var m=parseInt(sessionStorage.getItem("retries")||0);if(m>=b){c&&console.error("ğŸ”•ğŸ”•ğŸ”• Max retries reached... ack-ing anyway");l()}else{sessionStorage.setItem("retries",m+1)}}})}});
}catch(e){WRMCB(e)};